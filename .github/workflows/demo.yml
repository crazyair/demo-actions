name: DingTalk Release Notify

# on:
#   workflow_dispatch: # manual trigger workflow to nofify dingTalk
#   release:
#     types: [published, edited]

# on:
#   discussion:
#     types: [created, edited, locked, unlocked]

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: dingtalk robot message
        uses: northwang-lucky/chatbot-webhook-client@v1.1.1
        with:
          app: DingTalk
          webhook: "https://oapi.dingtalk.com/robot/send?access_token=${{ secrets.DING_TALK_ACCESS_TOKEN }}"
          template: file://.template/message.json
          # template: >-
          #   {
          #     "msgtype": "markdown",
          #     "markdown": {
          #       "title": "ğŸ”¥ @${{ github.event.discussion.user.login }} åˆ›å»ºäº†è®¨è®ºï¼š${{ github.event.discussion.title }} ${{ github.event.discussion.html_url }}",
          #       "text": "### ğŸ”¥ @${{ github.event.discussion.user.login }} åˆ›å»ºäº†è®¨è®º \n [${{ github.event.discussion.title }}](${{ github.event.discussion.html_url }}) <hr /> \n > ğŸ’¬ æ¬¢è¿å‰å¾€ GitHub è¿›è¡Œè®¨è®ºï¼Œç¤¾åŒºå¯èƒ½éœ€è¦ä½ çš„å¸®åŠ©ã€‚"
          #     }
          #   }
