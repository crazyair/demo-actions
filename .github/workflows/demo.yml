name: DingTalk Release Notify

# on:
#   workflow_dispatch: # manual trigger workflow to nofify dingTalk
#   release:
#     types: [published, edited]

on:
  discussion:
    types: [created, edited, locked, unlocked]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: dingtalk robot message
        uses: fifsky/dingtalk-action@master
        with:
          url: ${{ secrets.DINGTALK_WEBHOOK}}
          type: markdown
          content: |
            # Tips
            ## Hello
            > from github action message
            > ^_^
      # - uses: visiky/dingtalk-release-notify@main
      #   with:
      #     DING_TALK_TOKEN: ${{ secrets.DING_TALK_ACCESS_TOKEN }}
      #     notify_title: "ğŸ‰ DingTalk Release Notify å‘å¸ƒ release {release_tag} ğŸ‰" # Template of nofify title message in DingTalk
      #     notify_body: "## { title }<hr /> ![](https://gw.alipayobjects.com/zos/antfincdn/pJ5JP3Ntkd/2021-08.png) <hr /> { body } <hr />" # Template of nofify body message in DingTalk
      #     notify_footer: "> å‰å¾€ [**G2Plot**]({ release_url }) æŸ¥çœ‹å®Œæ•´ä¿¡æ¯." # Template of nofify footer message in DingTalk
      #     at_all: false # whether to ding everybody
